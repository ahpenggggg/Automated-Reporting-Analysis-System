<style>
#map_canvas {
  height: 800px;
  width: 100%;
  margin: 0px;
  padding: 0px
}
</style>
<div class="row">
    <div class="col-12">
        <div class="form-group row">
            <label for="boundaryColor" class="col-sm-2 col-form-label">Boundary Color:</label>
            <div class="col-sm-3">
                <input type="text" id="boundaryColor" class="form-control jscolor" value="FF1493" />
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Boundary Tools</label>
            <div class="col-sm-10">
                <input type="button" id="enablePolygon" value="Draw Boundary" />
                <input type="button" id="clearSelection" value="Clear Selection" onclick="clearSelection();" />
                <input type="button" id="resetPolygon" value="Reset" style="display: none;" />
                <div id="showonPolygon" style="display:none;"><b>Area:</b> <span id="areaPolygon">&nbsp;</span></div>
            </div>
        </div>
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-12">
        <div id="map_canvas"></div>
    </div>
</div>

<script src="/jscolor-2.0.5/jscolor.js"></script>
<script>
    var geocoder, map, all_overlays = [];

//function initialize() {
    map = new google.maps.Map(
        document.getElementById("map_canvas"), {
            center: new google.maps.LatLng(1.5503052, 110.3394602),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            panControl: false,
            zoomControl: false,
            streetViewControl: false,
            disableDefaultUI: true,
            editable: false
        });
    var polyOptions = {
        strokeWeight: 2,
        strokeColor: '#FF1493',
        fillColor: '#FF1493',
        fillOpacity: 0.45,
        editable: true
    };
    
    var selectedShape;
    
    $('.jscolor').on('blur', function (e) {
        setColor(e.target.value);
    });

    var drawingManager = new google.maps.drawing.DrawingManager({
        drawingMode: google.maps.drawing.OverlayType.POLYGON,
        drawingControl: false,
        markerOptions: {
            draggable: true
        },
        polygonOptions: polyOptions
    });

    $('#enablePolygon').click(function() {
        setColor($('.jscolor').val());
        drawingManager.setMap(map);
        drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYGON);
    });

    $('#resetPolygon').click(function() {
        if (selectedShape) {
            selectedShape.setMap(null);
        }
        drawingManager.setMap(null);
        $('#showonPolygon').hide();
        $('#resetPolygon').hide();
    });
    
    google.maps.event.addListener(drawingManager, 'polygoncomplete', function(polygon) {
//        var area = google.maps.geometry.spherical.computeArea(selectedShape.getPath());
//        $('#areaPolygon').html(area.toFixed(2)+' Sq meters');
        $('#resetPolygon').show();
    });

    function clearSelection() {
        if (selectedShape) {
            selectedShape.setEditable(false);
            selectedShape = null;
            $('#resetPolygon').hide();
        }
    }

    function setSelection(shape) {
        clearSelection();
        selectedShape = shape;
        shape.setEditable(true);
        $('#resetPolygon').show();
    }
    
    function setColor(color) {
        color = '#' + color;
        polyOptions.fillColor = color;
        polyOptions.strokeColor = color;
    }

    google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
        all_overlays.push(e);
        if (e.type != google.maps.drawing.OverlayType.MARKER) {
            // Switch back to non-drawing mode after drawing a shape.
            drawingManager.setDrawingMode(null);

            // Add an event listener that selects the newly-drawn shape when the user
            // mouses down on it.
            var newShape = e.overlay;
            newShape.type = e.type;
            google.maps.event.addListener(newShape, 'click', function() {
                setSelection(newShape);
            });
            setSelection(newShape);
        }
    });
//}
//google.maps.event.addDomListener(window, "load", initialize);

</script>