<style>
    .form-label-width {
        width: 250px;
    }
</style>
    <div class="row">
        <div class="col-md-10"></div>
        <div class="col-md-2">
            <button class="btn btn-danger" data-ng-click="backList()" >Back</button>
            <a href="javascript:exportPdf()" class="btn btn-md btn-success ">Print</a>
    <!--        <button class="btn btn-success" data-ng-click="editComp(detailObj.coID)"><i class="fa fa-plus"></i> Edit</button>            -->
        </div>
    </div>
<div id="nodeToRenderAsPDF" style="padding-left: 20px;">
    <div class="row">
        <div class="col-md-12">
            <h2>Details of Complaint</h2>        
        </div>
    </div>

    <br/>
    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Date:</strong>
        <p  class="mx-sm-3">{{detailObj.complaintDate}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Time:</strong>
        <p  class="mx-sm-3">{{detailObj.complaintTime}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Source:</strong>
        <p  class="mx-sm-3">{{detailObj.sorce}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Reference No:</strong>
        <p  class="mx-sm-3">{{detailObj.refNo}}</p>
    </div>

    <br/>
    <hr/>
    <br/>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Name:</strong>
        <p  class="mx-sm-3">{{detailObj.name}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Company:</strong>
        <p  class="mx-sm-3">{{detailObj.company}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Tel No:</strong>
        <p  class="mx-sm-3">{{detailObj.telNo}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Address:</strong>
        <p  class="mx-sm-3">{{detailObj.address}}</p>
    </div>

    <div class="form-group row" data-ng-show="showCompImg">
        <strong class="col-xs-3 form-label-width">Image:</strong>
        <div class="mx-sm-3" style="width: 400px;height: 350px;">
            <img src="{{detailObj.compImg}}" style="width: 100%;height: 100%;object-fit: contain;" />
        </div>    
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Type of Complaint:</strong>
        <p  class="mx-sm-3">{{detailType}}</p>
    </div>

    <br/>
    <hr/>
    <br/>


    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Forwarded to Logistics Date:</strong>
        <p  class="mx-sm-3">{{detailObj.logisticsDate}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Forwarded to Logistics Time:</strong>
        <p  class="mx-sm-3">{{detailObj.logisticsTime}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Forwarded to Logistics By:</strong>
        <p  class="mx-sm-3">{{staffName}}</p>
    </div>

</div>

<div data-ng-show="viewControl >= 2">
    <br/>
    <hr/>
    <br/>

    <h4>Action Taken By Logistics</h4>

    
    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Area Under:</strong>
        <p class="mx-sm-3">{{areaCode}}</p>
    </div>
    
    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Area by Council:</strong>
        <p class="mx-sm-3">{{detailObj.council}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Forwarded to Sub-Contractor:</strong>
        <p  class="mx-sm-3">{{detailObj.forwardedSub}}</p>
    </div>
    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Forwarded to Sub-Contractor Date:</strong>
        <p  class="mx-sm-3">{{detailObj.forwardedDate}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Forwarded to Sub-Contractor Time:</strong>
        <p  class="mx-sm-3">{{detailObj.forwardedTime}}</p>
    </div>


    <hr/>
    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Status:</strong>
        <div class="col-md-3">
            <select class="form-control mx-sm-3" id="inputStatus" data-ng-model="status.status" data-live-search="true" data-width="100%">
                <option value="open">Open</option>
                <option value="pending">Pending</option>
                <option value="closed">Closed</option>
            </select>
        </div>
        <div class="col-md-3">
            <button class="btn btn-success" data-ng-click="updateStatus()" >Update</button>
        </div>
    </div>
    


    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Status Date:</strong>
        <p  class="mx-sm-3">{{status.statusDate}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Status Time:</strong>
        <p  class="mx-sm-3">{{status.statusTime}}</p>
    </div>

    <div class="form-group row" data-ng-show="showLogsImg">
        <strong class="col-xs-3 form-label-width">Image from Logistics:</strong>
        <div class="mx-sm-3" style="width: 400px;height: 350px;">
            <img src="{{detailObj.logsImg}}" style="width: 100%;height: 100%;object-fit: contain;" />
        </div>    
    </div>    

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Remark:</strong>
        <p  class="mx-sm-3">{{detailObj.remarks}}</p>
    </div>
    
    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Responded By:</strong>
        <p  class="mx-sm-3">{{logsStaffName}}</p>
    </div>  
    
    <div data-ng-show="viewControl == 2">
        <br/>
        <hr/>
        <br/>
        
        <div class="form-group row">
            <label for="custDate" class="col-xs-3 col-form-label form-label-width">Customer Informed Date:</label>
            <div class="col-md-9">
                <input type="date" id="custDate" class="form-control mx-sm-3" data-ng-model="custDate" />
            </div>
        </div>

        <div class="form-group row">
            <label for="custTime" class="col-xs-3 col-form-label form-label-width">Customer Informed Time</label>
            <div class="col-md-9">
                <input type="time" id="custTime" class="form-control mx-sm-3" data-ng-model="custTime" data-ng-change="custTimeChange(custTime)" str-to-time="" />
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-11"></div>
            <div class="col-md-1">
                <button class="btn btn-success" data-ng-click="updateCust()" >Submit</button>
            </div>
        </div>
    </div>
</div>

<div data-ng-show="viewControl >= 3">
    
    <br/>
    <hr/>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Customer Informed Date:</strong>
        <p  class="mx-sm-3">{{detailObj.customerDate}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Customer Informed Time:</strong>
        <p  class="mx-sm-3">{{detailObj.customerTime}}</p>
    </div>

    <div class="form-group row">
        <strong class="col-xs-3 form-label-width">Customer Informed By:</strong>
        <p  class="mx-sm-3">{{informCustStaffName}}</p>
    </div>
    
</div>   
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
<script src="/scripts/html2canvas.min.js"></script>
<script>
    function exportPdf(quality = 10) {
        var filename = 'ComplaintExport.pdf';

        html2canvas(document.querySelector('#nodeToRenderAsPDF'), {
            useCORS: true,
            imageTimeout: 2000,
            scale: quality,
            background :'#FFFFFF'
        }).then(function(canvas) {
            var img = canvas.toDataURL("image/jpeg", 1.0);
            window.URL.revokeObjectURL(img);
            var pdf = new jsPDF('l', 'mm', 'a3');
            pdf.addImage(img, 'JPEG', 45, 45, 380, 200);
            pdf.save(filename);
        });
    }
</script>